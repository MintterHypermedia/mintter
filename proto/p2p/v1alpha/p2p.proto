syntax = "proto3";

package com.mintter.p2p.v1alpha;

option go_package = "mintter/api/go/p2p/v1alpha;p2p";

// Mintter P2P API.
service P2P {
  rpc Handshake(HandshakeInfo) returns (HandshakeInfo);

  rpc Ping(PingRequest) returns (PingResponse);

  rpc GetObjectVersion(GetObjectVersionRequest) returns (Version);
}

message HandshakeInfo {
  Version profile_version = 1;
}

message PingRequest {}

message PingResponse {}

message GetObjectVersionRequest {
  string object_id = 1;
}

message Version {
  repeated PeerVersion version_vector = 1;
}

message PeerVersion {
  string peer = 1;

  string head = 2;

  uint64 seq = 3;

  uint64 lamport_time = 4;
}